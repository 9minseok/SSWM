pipeline {
    agent any

    environment {
        // You can set up environment variables here if needed
        // NODE_ENV = 'production'
    }

    stages {
        stage('Checkout') {
            steps {
                // Use credentials to authenticate with the GitLab repository
                checkout([
                    $class: 'GitSCM',
                    branches: [[name: 'deploy-frontend']],
                    userRemoteConfigs: [[
                        url: 'https://lab.ssafy.com/s09-webmobile1-sub2/S09P12A206.git',
                        credentialsId: 'ssafy'
                    ]]
                ])
            }
        }

        stage('Build and Deploy') {
            agent {
                // Define the Docker image and options for the container
                docker {
                    image 'node:18.16.1'
                    args '-p 3000:3000'
                }
            }
            steps {
                script {
                    // Install dependencies using npm or yarn
                    sh 'npm install' // or 'yarn install'

                    // Build your React project
                    sh 'npm run build' // or 'yarn build'
                }
            }
        }
    }

    // Add post-build actions or additional stages as needed
    // For example, you might add a stage to deploy the built application.
}
